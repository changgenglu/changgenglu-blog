{"name":"RESTful API.md","content":"# RESTful API\r\n\r\n> RESTful API 是一種設計模式\r\n>\r\n> 定義一組\"物件\"(object)，他們是可以被操作的。\r\n> 物件運用一組固定\"動作\"(action)簡稱(CRUD)\r\n>\r\n> - 創建(create)\r\n> - 刪除(delete)\r\n> - 更新(update)\r\n> - 讀取(read)\r\n>\r\n> 主流以 JSON 格式做資料傳遞\r\n> 基本上會包含 URL\\Object\\Action\r\n\r\n## 常用 HTTP 動詞\r\n\r\n- GET: 讀取資源(不會變動或是更改到伺服器的資訊，主要用來查資料)\r\n- POST: 新增資料\r\n- DELETE: 刪除資料\r\n- PUT: 替換資源\r\n- PATCH: 更新資源\r\n\r\n如以 Post(文章)這個物件舉例\r\n\r\n| HTTP 動詞 |      URL       |           功能           |                                       說明                                       |\r\n| :-------: | :------------: | :----------------------: | :------------------------------------------------------------------------------: |\r\n|   POST    |  api/v1/posts  |       發表一篇文章       |        如果有相同的請求送第二次，會回傳新的一筆資料，內容一樣只有 ID 不同        |\r\n|  DELETE   | api/v1/posts/1 |     刪除 id=1 的文章     |                 如果發送兩次請求，第二次回傳找不到資源的錯誤訊息                 |\r\n|    PUT    | api/v1/posts/1 |    id=1 資料整筆替換     |                  替換整筆資料，有點像舊資料的刪除，寫入新的資料                  |\r\n|   PATCH   | api/v1/posts/1 | 更新文件 id=1 的部分內容 | 只替代掉部分內容，內容會依照發送請求的資料作修改。如果沒有填寫的部分保留原始資料 |\r\n\r\n- 其他不符合以上類別的動作用 POST\r\n\r\n## Laravel RESTful API\r\n\r\n### 建立 controller\r\n\r\n```bash\r\nphp artisan make:controller Api/TestController --api\r\n```\r\n\r\n```php\r\nnamespace App\\Http\\Controllers\\Api;\r\n\r\nuse App\\Http\\Controllers\\Controller;\r\nuse Illuminate\\Http\\Request;\r\n\r\nclass TestController extends Controller\r\n{\r\n    public function index()\r\n    {\r\n        // 列出所有\r\n    }\r\n\r\n    public function store(Request $request)\r\n    {\r\n        // 建立資料\r\n    }\r\n\r\n    public function show($id)\r\n    {\r\n        // 顯示指定 id 的資料\r\n    }\r\n\r\n    public function update(Request $request, $id)\r\n    {\r\n        // 更新指定 id 的資料\r\n    }\r\n\r\n    public function destroy($id)\r\n    {\r\n        // 刪除指定 id 的資料\r\n    }\r\n}\r\n```\r\n\r\n### 加入 api\r\n\r\nroutes/api.php\r\n\r\n```php\r\nRoute::middleware('auth:api')->group(function () {\r\n    Route::apiResource('test', 'TestController');\r\n});\r\n```\r\n\r\n### URL\r\n\r\n| action |                 url                  | Controller function |\r\n| :----: | :----------------------------------: | :-----------------: |\r\n|  get   |     `{{ server-url }}/api/test`      |        index        |\r\n|  post  |     `{{ server-url }}/api/test`      |        store        |\r\n|  get   | `{{ server-url }}/api/test/{{ id }}` |        show         |\r\n| patch  | `{{ server-url }}/api/test/{{ id }}` |       update        |\r\n| delete | `{{ server-url }}/api/test/{{ id }}` |       destroy       |\r\n","tocContent":""}