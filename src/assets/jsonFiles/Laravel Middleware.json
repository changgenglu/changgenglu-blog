{"name":"Laravel Middleware.md","content":"# [Laravel Middleware](https://learnku.com/docs/laravel/8.x/middleware/9366)\n\n## 定義 middleware\n\n```bash\nphp artisan make:middleware CheckAge\n```\n\n在 `app/Http/Middleware` 目錄之下產生一個新的 CheckAge class，並在其中建立規則：僅允許 `age` 參數大於 200 的請求路徑進行訪問，否則將重新導向至 `home` 頁面\n\n```php\nnamespace App\\Http\\Middleware;\n\nuse Closure;\n\nclass CheckAge\n{\n    /**\n     * 处理传入的请求\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  \\Closure  $next\n     * @return mixed\n     */\n    public function handle($request, Closure $next)\n    {\n        if ($request->age <= 200) {\n            return redirect('home');\n        }\n\n        return $next($request);\n    }\n}\n```\n\n可以設定 middleware 的動作是在 request 之前或是之後\n\n```php\n// 在request 之前\nclass BeforeMiddleware\n{\n    public function handle($request, Closure $next)\n    {\n        // Perform action\n\n        return $next($request);\n    }\n}\n\n// 在request 之後\nclass AfterMiddleware\n{\n    public function handle($request, Closure $next)\n    {\n        $response = $next($request);\n\n        // Perform action\n\n        return $response;\n    }\n}\n```\n\n## 註冊 Middleware\n","tocContent":""}