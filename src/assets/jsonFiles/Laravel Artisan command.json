{"name":"Laravel Artisan command.md","content":"# Artisan Command\r\n\r\n## 自訂 Artisan command\r\n\r\n### 利用指令建立要自訂命令的檔案\r\n\r\n```bash\r\nphp artisan make:command <command-name>\r\n```\r\n\r\n建立的檔案位置會在 app/Console/Commands\r\n\r\n### 編輯檔案\r\n\r\n編輯指令名稱\r\n\r\n```php\r\nprotected $signature = 'EditCity:city {country_code}';\r\n```\r\n\r\n實際指令\r\n\r\n```bash\r\nphp artisan EditCity:city us\r\n```\r\n\r\n編寫命令\r\n\r\n```php\r\npublic function handle()\r\n{\r\n    try {\r\n       echo \"Hello World\";\r\n    } catch (QueryException $ex) {\r\n        dd($ex->getMessage());\r\n    }\r\n}\r\n```\r\n\r\n### 參數\r\n\r\n- 花括號中為傳入的參數\r\n\r\n  - {country_code?} 可選的參數\r\n  - {country_code=tw} 參數的預設值\r\n  - {country_code*} `*`代表輸入的是陣列\r\n  - {country_code:國家代碼} 加入敘述\r\n\r\n- 選項：關鍵字是`--`\r\n\r\n  - {--queue=} 選項後面加上 `=`，表示選項需要明確指定值。\r\n  - {--Q|queue} 可用簡寫\r\n  - {--id=_} `_`代表輸入的是陣列\r\n  - {--queue=:這個工作是否該進入隊列} 加入敘述\r\n\r\n- 取得參數\r\n\r\n  - $this->argument('user') 取得單一 user 參數\r\n  - $this->arguments() 取得所有參數，以陣列呈現\r\n  - $this->options('queue') 取得單一 queue 選項\r\n  - $this->options() 取得所有選項，以陣列呈現\r\n\r\n- 互動式指令\r\n\r\n  - ask 詢問\r\n\r\n    ```php\r\n    $name = $this->ask('what is ur name');\r\n    ```\r\n\r\n  - secret 詢問，但回答在終端機看不到\r\n\r\n    ```php\r\n    $name = $this->secret('what is ur password');\r\n    ```\r\n\r\n  - confirm 確認問題，預設回傳值是 false，若使用者回傳 y 則回傳 true\r\n\r\n    ```php\r\n    if ($this->confirm('wanna continue?')) {\r\n        //\r\n    }\r\n\r\n    ```\r\n\r\n  - anticipate 自動完成，若是 Taylor 或是 Dayle 這兩個選項就自動完成，使用者亦可以輸入其他選項\r\n\r\n    ```php\r\n    $name = $this->anticipate('what is ur name', ['Taylor', 'Dayle']);\r\n    ```\r\n\r\n  - choice 選項選擇，使用者輸入 key 值\r\n\r\n    ```php\r\n    $name $this->choice('what is ur name', ['Sunny', 'Taylor', 'Dayle'], $defaultIndex);\r\n    ```\r\n\r\n    ```txt\r\n    What is your name? [Taylor]: //在這個$defaultIndex = 1\r\n      [0] Sunny\r\n      [1] Taylor\r\n      [2] Dayle\r\n     > 0\r\n\r\n    Display name: Sunny\r\n    ```\r\n\r\n### 註冊 command\r\n\r\napp\\console\\Commands\\Kernel.php\r\n\r\n```php\r\nprotected $commands = [\r\n    EditCity::class\r\n];\r\n```\r\n","tocContent":""}